@using Helios365.Core.Models
@using MudBlazor

@if (Resource is null)
{
    <MudAlert Severity="Severity.Info">No MySQL data.</MudAlert>
}
else
{
    <MudPaper Class="pa-4 mb-3">
        <MudText Typo="Typo.h6" Class="mb-3">MySQL Flexible Server</MudText>
        <MudText Color="Color.Secondary" Typo="Typo.caption">SKU</MudText>
        <MudText>@GetMetadata("skuName")</MudText>
        <MudText Color="Color.Secondary" Typo="Typo.caption" Class="mt-2">Version</MudText>
        <MudText>@GetMetadata("engineVersion")</MudText>
    </MudPaper>
}

@code {
    [Parameter] public Resource? Resource { get; set; }

    private string GetMetadata(string key)
    {
        if (Resource?.Metadata is null)
        {
            return "-";
        }

        foreach (var kvp in Resource.Metadata)
        {
            if (string.Equals(kvp.Key, key, StringComparison.OrdinalIgnoreCase))
            {
                return string.IsNullOrWhiteSpace(kvp.Value) ? "-" : kvp.Value;
            }
        }

        return "-";
    }
}
